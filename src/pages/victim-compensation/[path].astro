---
import type { MarkdownInstance, Page, PaginateFunction } from 'astro'

let {post} = Astro.props;

 let { state, facility, slug  } = Astro.params;


let {path, statusCodeMatch, facId,  LandingPage, oldFacSlug, redirectUrl3} = post.props.post


export async function getStaticPaths({ paginate }: { paginate: PaginateFunction }) {



// const redirects2 = await fetch(
//   'https://claims-advocacy.org/.netlify/functions/neo-api-fake-50'
// ).then((res) => res.json());

// const redirects3 = await fetch(
//   'https://claims-advocacy.org/.netlify/functions/neo-api-fake-51'
// ).then((res) => res.json());

// const redirects2 = await fetch(
//   'http://localhost:8888/.netlify/functions/neo-api-fake-50'
// ).then((res) => res.json());

// const redirects3 = await fetch(
//   'http://localhost:8888/.netlify/functions/neo-api-fake-51'
// ).then((res) => res.json());


// const redirects2 = await fetch(
//   'https://victim-assist-prod-blog-8esab2mg2-victim-assist.vercel.app/neoapi/neo-api-fake-50.json'
// ).then((res) => res.json());


// const redirects3 = await fetch(
//   'https://victim-assist-prod-blog-8esab2mg2-victim-assist.vercel.app/neoapi/neo-api-fake-51.json'
// ).then((res) => res.json());



// let combinedResponses = [].concat(redirects.message, redirects2.message);
// let combinedResponses = [].concat(redirects2.message, redirects3.message);

// let finalResponses = {message:combinedResponses}


 let response2 = {
  message: [
    
 
 
 
  {
"path": "catahoula-parish-jail",
"statusCodeMatch": "200",
"facId": "69725-2",
"state": "louisiana",
"LandingPage": "https://claims-advocacy.org/jail-prisons/louisiana/acatahoula-parish-jail/69725-2/send-inmate-money-commissary/",
"slug": "send-inmate-money-commissary",
"redirectUrl3": "https://claims-advocacy.org/jail-prisons/louisiana/catahoula-parish-jail/send-inmate-money-commissary/"
  }
    
  ]
}

// let slugs = ['visitation', 'write-a-prisoner']
// let allFacs = slugs.map( slug=>{

//   return slug;
// } )

// let response2 
// let newFacs = finalResponses.message.map( (res: {
  let newFacs = response2.message.map( (res: {
    path: string, 
    statusCodeMatch: string,
    facId: string, 
    state: string,
    LandingPage:string,
    slug:string,
    redirectUrl3:string,
   

}) =>{
      
      let {path, statusCodeMatch, facId, state,    LandingPage, slug, redirectUrl3, } = res
      slug == undefined || slug == '' || slug=='null' ? slug=' ' : slug;
      state = state.replace(' ','-');
      redirectUrl3 = redirectUrl3.replace(' ','-');
   
      let finalUrl = { 
        
        params: { path }, 
          props:  { post:{
            path,state, LandingPage, slug, redirectUrl3
        }
      } 
    }

   
    return finalUrl

})

  return newFacs.map((post: { params: any }) => {
// console.log(545454545,post) 
    return {
      params:  post.params as any ,
      props: { post } };
  });



}
// redirectUrl3 = redirectUrl3.replace('inmate-phone-calls', 'inmate-calling')

// console.log(34534545, redirectUrl3, 34534545)
// console.log("and ldu slug is:", oldFacSlug, path, statusCodeMatch, state, facId, "and redirec is: ", redirectUrl3 );

---

<!-- <Base frontmatter={frontmatter}> -->
  
  <head>
    <meta http-equiv="refresh" content={`0; url=${redirectUrl3}`} />
  </head>
  <!-- <Sections data={post} stateName={state as string} statePath={facility as string} 
  facilityName={post.props.post.title as string}  type={"facility-page"} slug={slug as string}  />
  
  <FacilityBlogRoll 
  data={post} stateName={state as string} statePath={facility as string} 
  facilityName={post.props.post.title as string}  type={"facility-page"} slug={slug as string}/>
  
  <BodySections data={post} stateName={state as string} statePath={facility as string} 
  facilityName={post.props.post.title as string}  type={"facility-page"} slug={slug as string} /> -->
   
  <!-- <CTA type="how-it-works" /> -->
  <div class="p-24 md:p-12 bg-white dark:bg-black"></div>
 
<!-- </Base> -->